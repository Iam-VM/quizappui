{"ast":null,"code":"import _slicedToArray from\"/home/vm/Desktop/Projects/quizApp/quizappui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import GameRenderer from\"./gameRenderer\";import{ADD_RESPONSE}from\"../../queries\";import{useMutation}from\"@apollo/react-hooks\";import Cookies from'js-cookie';import'./playQuestion.css';//add response array and showResults func in parent\nvar answeredQuestionArray=[];var GameScreen=function GameScreen(props){var _useMutation=useMutation(ADD_RESPONSE),_useMutation2=_slicedToArray(_useMutation,2),triggerMutation=_useMutation2[0],data=_useMutation2[1].data;var _useState=useState(props.progress),_useState2=_slicedToArray(_useState,2),progress=_useState2[0],setProgress=_useState2[1];//changed count to progress\nvar _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),questionNumber=_useState4[0],setQuestionNumber=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),haveImage=_useState6[0],setHaveImage=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),haveOptions=_useState8[0],setHaveOptions=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),questionText=_useState10[0],setQuestionText=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),options=_useState12[0],setOptions=_useState12[1];useEffect(function(){if(progress<props.stateData.questions.length){setQuestionText(props.stateData.questions[progress].question);setHaveImage(props.stateData.questions[progress].haveImage);setHaveOptions(props.stateData.questions[progress].haveOptions);var optionsArray=[props.stateData.questions[progress].optionOne,props.stateData.questions[progress].optionTwo,props.stateData.questions[progress].optionThree,props.stateData.questions[progress].optionFour];setOptions(optionsArray);setQuestionNumber(progress+1);}if(progress===props.stateData.questions.length){props.showResults();}},[progress]);var triggerNextQuestion=function triggerNextQuestion(){setProgress(progress+1);};var addResponse=function addResponse(response,point){triggerMutation({variables:{ID:Cookies.get('user_id'),progress:questionNumber,response:response,points:point}});};var checkAnswer=function checkAnswer(optionText,ratio,qN){if(progress<props.stateData.questions.length){if(!answeredQuestionArray.includes(qN)){answeredQuestionArray.push(qN);if(ratio!==null){var correctOptionsArray=props.stateData.questions[progress].correctOption.map(function(option){return option.toLowerCase();});if(correctOptionsArray.includes(optionText.toLowerCase())){var point=200+Math.round(ratio*100);addResponse(optionText,props.points+point);props.setPoints(props.points+point);setTimeout(function(){return triggerNextQuestion();},500);}else{addResponse(optionText,props.points);setTimeout(function(){return triggerNextQuestion();},500);}}else{addResponse(optionText,props.points);setTimeout(function(){return triggerNextQuestion();},500);}}}};return/*#__PURE__*/React.createElement(\"div\",{className:'gameScreen'},/*#__PURE__*/React.createElement(GameRenderer,{questionText:questionText,stateData:props.stateData,questionNumber:questionNumber,haveImage:haveImage,haveOptions:haveOptions,options:options,progress:progress,checkAnswer:checkAnswer,totalQuestions:props.stateData.questions.length}));};export default GameScreen;","map":{"version":3,"sources":["/home/vm/Desktop/Projects/quizApp/quizappui/src/components/playComponents/gameScreen.js"],"names":["React","useState","useEffect","GameRenderer","ADD_RESPONSE","useMutation","Cookies","answeredQuestionArray","GameScreen","props","triggerMutation","data","progress","setProgress","questionNumber","setQuestionNumber","haveImage","setHaveImage","haveOptions","setHaveOptions","questionText","setQuestionText","options","setOptions","stateData","questions","length","question","optionsArray","optionOne","optionTwo","optionThree","optionFour","showResults","triggerNextQuestion","addResponse","response","point","variables","ID","get","points","checkAnswer","optionText","ratio","qN","includes","push","correctOptionsArray","correctOption","map","option","toLowerCase","Math","round","setPoints","setTimeout"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport GameRenderer from \"./gameRenderer\";\nimport {ADD_RESPONSE} from \"../../queries\";\nimport {useMutation} from \"@apollo/react-hooks\";\nimport Cookies from 'js-cookie';\nimport './playQuestion.css';\n\n//add response array and showResults func in parent\n\nconst answeredQuestionArray = [];\nconst GameScreen = (props) => {\n    const [triggerMutation, { data }] = useMutation(ADD_RESPONSE);\n    const [progress, setProgress] = useState(props.progress); //changed count to progress\n    const [questionNumber, setQuestionNumber] = useState(null);\n    const [haveImage, setHaveImage] = useState(\"\");\n    const [haveOptions, setHaveOptions] = useState(\"\");\n    const [questionText, setQuestionText] = useState('');\n    const [options, setOptions] = useState([]);\n\n\n    useEffect(() => {\n        if (progress < props.stateData.questions.length) {\n            setQuestionText(props.stateData.questions[progress].question);\n            setHaveImage(props.stateData.questions[progress].haveImage);\n            setHaveOptions(props.stateData.questions[progress].haveOptions);\n            const optionsArray = [props.stateData.questions[progress].optionOne,\n                props.stateData.questions[progress].optionTwo,\n                props.stateData.questions[progress].optionThree,\n                props.stateData.questions[progress].optionFour];\n            setOptions(optionsArray);\n            setQuestionNumber(progress + 1);\n        }\n        if (progress === props.stateData.questions.length) {\n            props.showResults();\n        }\n    }, [progress]);\n\n\n\n    const triggerNextQuestion = () => {\n        setProgress(progress + 1);\n    };\n\n    const addResponse = (response, point) => {\n        triggerMutation({\n            variables : {ID : Cookies.get('user_id'),\n            progress : questionNumber,\n            response : response,\n            points : point}\n        });\n    };\n\n\n\n\n\n    const checkAnswer = (optionText, ratio, qN) => {\n        if (progress < props.stateData.questions.length) {\n            if (!answeredQuestionArray.includes(qN)) {\n                answeredQuestionArray.push(qN);\n                if (ratio !== null) {\n                    const correctOptionsArray = props.stateData.questions[progress].correctOption.map(option => option.toLowerCase());\n                    if (correctOptionsArray.includes(optionText.toLowerCase())) {\n                        let point = 200 + Math.round(ratio*100);\n                        addResponse(optionText, props.points + point);\n                        props.setPoints(props.points + point);\n                        setTimeout(() => triggerNextQuestion(), 500);\n                    }\n                    else {\n                        addResponse(optionText, props.points);\n                        setTimeout(() => triggerNextQuestion(), 500);\n                    }\n                }\n                else {\n                    addResponse(optionText, props.points);\n                    setTimeout(() => triggerNextQuestion(), 500);\n                }\n            }\n        }\n    };\n\n\n    return (\n        <div className={'gameScreen'}>\n            <GameRenderer questionText={questionText}\n                          stateData={props.stateData}\n                          questionNumber={questionNumber}\n                          haveImage={haveImage}\n                          haveOptions={haveOptions}\n                          options={options}\n                          progress={progress}\n                          checkAnswer={checkAnswer}\n                          totalQuestions={props.stateData.questions.length} />\n        </div>\n    );\n};\n\nexport default GameScreen;"]},"metadata":{},"sourceType":"module"}